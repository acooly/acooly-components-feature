let acooly_daterangepicker_class={init:function(){var that=this;$(".acooly-daterangepicker").daterangepicker({ranges:{"今天":[moment(),moment()],"昨天":[moment().subtract(1,"days"),moment().subtract(1,"days")],"7天内":[moment().subtract(6,"days"),moment()],"30天内":[moment().subtract(29,"days"),moment()],"本月":[moment().startOf("month"),moment().endOf("month")],"上个月":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},locale:{format:"YYYY-MM-DD",separator:" - ",applyLabel:"确定",cancelLabel:"清除",fromLabel:"从",toLabel:"到",customRangeLabel:"自定义",weekLabel:"周",daysOfWeek:["日","一","二","三","四","五","六"],monthNames:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],firstDay:1},startDate:moment().subtract(6,"days"),endDate:moment(),alwaysShowCalendars:true,showDropdowns:true,showISOWeekNumbers:true,linkedCalendars:false,minDate:"2010-01-01",maxDate:"2100-01-01"},function(start,end,label){});$(".acooly-daterangepicker").on("apply.daterangepicker",function(ev,picker){that._on_apply(picker.element,picker.startDate.format("YYYY-MM-DD"),picker.endDate.format("YYYY-MM-DD"),picker.chosenLabel)});$(".acooly-daterangepicker").on("cancel.daterangepicker",function(ev,picker){that._on_cancel(ev,picker)});$(".acooly-daterangepicker").each(function(){let startVal=$(this).data("start-value");let endVal=$(this).data("end-value");if(startVal){$(this).data("daterangepicker").setStartDate(startVal)}if(endVal){$(this).data("daterangepicker").setEndDate(endVal)}if(startVal||endVal){that._on_daterangepicker_apply($(this),startVal,endVal,"自定义")}})},_on_apply:function(el,startDate,endDate,label){let filedStart=$(el).data("start-name");let filedEnd=$(el).data("end-name");let existStart=$(el).find("input[name='"+filedStart+"']");if(!existStart||existStart.length==0){$(el).append('<input type="hidden" name="'+filedStart+'" value="'+startDate+'">')}else{existStart.val(startDate)}let existEnd=$(el).find("input[name='"+filedEnd+"']");if(!existEnd||existEnd.length==0){$(el).append('<input type="hidden" name="'+filedEnd+'" value="'+endDate+'">')}else{existEnd.val(endDate)}let show="";if(!startDate&&!endDate){show="选择日期段"}else{if(!startDate){startDate="?"}if(!endDate){endDate="?"}show=label+": "+startDate+" - "+endDate}$(el).find("span").html(show)},_on_cancel:function(ev,picker){let el=picker.element;let filedStart=$(el).data("start-name");let filedEnd=$(el).data("end-name");let existStart=$(el).find("input[name='"+filedStart+"']");let existEnd=$(el).find("input[name='"+filedEnd+"']");if(existStart&&existStart.length>0){existStart.val("")}if(existEnd&&existEnd.length>0){existEnd.val("")}$(el).find("span").html("选择日期段")}};(function($){if(!$.acooly){$.acooly={}}if(!$.acooly.daterangepicker){$.extend($.acooly,{daterangepicker:acooly_daterangepicker_class})}})(jQuery);